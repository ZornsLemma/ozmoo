digraph memory {
    node [shape=plaintext];

    top [label=<
    <table>
        <tr><td>Virtual memory cache<br/>(vmap_max_entries 512-byte blocks)</td>
            <td>
                <table port="vmem">
                    <tr><td port="lastblock">block vmap_max_entries-1</td></tr>
                    <tr><td>...</td></tr>
                    <tr><td port="block1">block 1</td></tr>
                    <tr><td port="block0">block 0</td></tr>
                </table>
            </td>
            </tr>
        <tr><td colspan="2">Game dynamic memory</td></tr>
        <tr><td colspan="2">Z-machine stack</td></tr>
        <tr><td>Ozmoo binary</td>
            <td>
                <table>
                    <tr><td>code</td></tr>
                    <tr><td port="vmap">vmap</td></tr>
                    <tr><td>code</td></tr>
                </table>
            </td></tr>
    </table>>];

    # vmap [label="{ { vmap_max_entries - 1 | foo } | ... | { 1 | foo } | {0 | foo } }"];
    vmap [label=<
         <table>
            <tr><td>vmap_max_entries-1</td><td port="lastblock">foo</td></tr>
            <tr><td>...</td><td>...</td></tr>
            <tr><td>1</td><td port="block1">bar</td></tr>
            <tr><td>0</td><td port="block0">baz</td></tr>
         </table>>];

    { rank = same; vmem vmap };

    top:vmap -> vmap;
    top:lastblock -> vmap:lastblock;
    top:block1 -> vmap:block1;
    top:block0 -> vmap:block0;
}

# vi: sw=4 sts=4
    #{ { Virtual memory cache \n (vmap_max_entries 512-byte blocks) | { <lastblock> block vmap_max_entries - 1 | ... | <block1> block 1 | <block0> block 0 } } | Game dynamic memory | Z-machine stack | { Ozmoo binary | { code | <vmap> vmap | code } } }"];
